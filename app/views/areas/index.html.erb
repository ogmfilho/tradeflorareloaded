<!--página copiada do beta, falta formatação -->
<div>
  <h2 id="h2-areas">Áreas disponíveis</h2>
</div>

  <div class="content-areas">
    <% if @areas.empty? %>
      <div id="paddingleft16">
        <p>Nenhuma área encontrada com os parâmetros da busca</p>
        <%# end %>
      </div>
    <% else %>
      <div class="cards-areas">
        <% @areas.each do |area| %>
          <div class="card-areas">
            <% if !area.photos.attached? %>
              <img src="assets/<%=area.basin.name%>.jpg">
            <% else %>
              <%= cl_image_tag area.photos[0].key, crop: :fill %>
            <% end %>
              <div class="card-areas-infos">
                <p class="alignright"><%= image_tag "areas/brazil-icon.png", alt: "Mapa do Brasil", width: 25 %> Bacia: <%= area.basin.name %></p>
                <h2><%= area.description %></h2>
                <p style="margin-bottom: 3px;">Cod. da Área: <%= area.id %></p>
                <p class="mb-1"><i class="fas fa-user-circle"></i>Área de: <%= area.user.name %></p>
                <p style="margin-bottom: 5px; font-size: 15px;">Extensão:</p>
                  <p style="font-size: 20px;"><%= image_tag "areas/dimension-icon-sm.png", alt: "Ícone - Tamanho", width: 40 %> <%= area.extension %><span> hectares</span></p>
                <br>
                <br>
                <%= link_to "Detalhes", area_path(area), class: "br-button primary" %>
              </div>
          </div>
        <% end %>
      </div>
    <% end %>


  <div id="searchbox">
    <h4>Pesquisa</h4>
    <%= simple_form_for @search, url: area_searches_path do |s| %>
      <div>
        <%= s.text_field :keywords, placeholder: 'Digite Aqui' %>
       </div>
       <div>
        <%= s.input :states_id, label: "Estado", collection: @states.sort_by { |state| state[:name]}, input_html:  { class: "selectmult", multiple: true } %>
       </div>
       <div>
        <%= s.input :cities_id, label: 'Município', collection: State.all.sort_by {|state| state[:name]}, as: :grouped_select, group_method: :cities, input_html:  { class: "selectmult", multiple: true } %>
       </div>
       <div>
        <%= s.input :basins_id, label: "Bacia Hidrográfica", collection: @basins, input_html:  { class: "selectmult", multiple: true } %>
       </div>
       <div>
         <p><%= s.label "Extensão Mín (hectares)" %> - <%= s.text_field :min_extension, size: 7 %></p>
          <p><%= s.label "Extensão Máx (hectares)" %> - <%= s.text_field :max_extension, size: 7 %></p>
       </div>
       <br>
       <div>
         <%= s.submit "Procurar", class: "br-button primary"%>
       </div>
    <% end %>
    <hr>
    <%if user_signed_in?%>
      <p><%= link_to "Criar Área", new_area_path(@area), class: "br-button primary" %></p>
      <hr>
    <% end %>
    <p><%= link_to "Ver no Mapa", maps_path, class: "br-button primary" %></p>
    <br>
  </div>
</div>

<!-- Abaixo o link para a paginação, da gem Pagy - para mais informações, ver o gemfile -->
<div class="d-flex justify-content-center">
  <%= pagy_bootstrap_nav(@pagy).html_safe %>
</div>
